<style>
    .calc-container {
        display: grid;
        grid-template-columns: repeat(4, 60px);
        gap: 5px;
        justify-content: center;
    }
    .calc-input {
        grid-column: span 4;
        width: 100%;
        height: 50px;
        font-size: 20px;
        margin-bottom: 10px;
        text-align: right;
        padding-right: 10px;
    }
    .calc-button {
        width: 60px;
        height: 60px;
        font-size: 20px;
    }
</style>
<form name="calculator" class="calc-container" onsubmit="return false;">
    <input type="text" id="calculator_input" class="calc-input" readonly>
    <input type="button" class="calc-button" value="C" onclick="document.calculator.calculator_input.value=''">
    <input type="button" class="calc-button" value="/" onclick="document.calculator.calculator_input.value+=' / '">
    <input type="button" class="calc-button" value="*" onclick="document.calculator.calculator_input.value+=' * '">
    <input type="button" class="calc-button" value="-" onclick="document.calculator.calculator_input.value+=' - '">
    <input type="button" class="calc-button" value="7" onclick="document.calculator.calculator_input.value+='7'">
    <input type="button" class="calc-button" value="8" onclick="document.calculator.calculator_input.value+='8'">
    <input type="button" class="calc-button" value="9" onclick="document.calculator.calculator_input.value+='9'">
    <input type="button" class="calc-button" value="+" onclick="document.calculator.calculator_input.value+=' + '">
    <input type="button" class="calc-button" value="4" onclick="document.calculator.calculator_input.value+='4'">
    <input type="button" class="calc-button" value="5" onclick="document.calculator.calculator_input.value+='5'">
    <input type="button" class="calc-button" value="6" onclick="document.calculator.calculator_input.value+='6'">
    <input type="button" class="calc-button" value="." onclick="document.calculator.calculator_input.value+='.'">
    <input type="button" class="calc-button" value="1" onclick="document.calculator.calculator_input.value+='1'">
    <input type="button" class="calc-button" value="2" onclick="document.calculator.calculator_input.value+='2'">
    <input type="button" class="calc-button" value="3" onclick="document.calculator.calculator_input.value+='3'">
    <input type="button" class="calc-button" value="=" onclick="document.calculator.calculator_input.value=calculate(document.calculator.calculator_input.value)">
    <input type="button" class="calc-button" value="0" onclick="document.calculator.calculator_input.value+='0'">
    <input type="button" class="calc-button" value="DEL" onclick="document.calculator.calculator_input.value = document.calculator.calculator_input.value.slice(0, -1)">
</form>
<script>
    function calculate(expression) {
        try {
            // Replace comma with dot for decimal handling
            expression = expression.replace(/,/g, '.');
            // Validate expression to avoid security issues with eval
            if (/[^-()\d/*+.]/.test(expression)) {
                return 'Error';
            }
            return eval(expression);
        } catch (e) {
            return 'Error';
        }
    }

    document.getElementById('calculator_input').addEventListener('keydown', function(event) {
        event.preventDefault();  // Prevent default action to avoid conflicts with page input
        const key = event.key;
        const calculatorScreen = event.target;

        if (!isNaN(key) || ['+', '-', '*', '/'].includes(key)) {
            calculatorScreen.value += key;
        } else if (key === 'Enter') {
            calculatorScreen.value = calculate(calculatorScreen.value);
        } else if (key === 'Backspace') {
            calculatorScreen.value = calculatorScreen.value.slice(0, -1);
        } else if (key.toLowerCase() === 'c') {
            calculatorScreen.value = '';
        } else if (key === ',' || key === '.') {
            calculatorScreen.value += '.';
        }
    });

    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            document.getElementById('calculator_input').value = '';
        }
    });

    // Ensure the calculator input is focused for keyboard input
    document.getElementById('calculator_input').focus();
</script>

